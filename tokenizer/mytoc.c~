#include "mytoc.h"
#include <stdlib.h>
#include <stdio.h>
char ** mytoc(char *str, char delim){
  int numWords = countWords(str, delim);
  char ** vector;
  char * pStr;
  char * tempWord;
  pStr = str;
  int index, wordLength, position, currentWord = 0;
  vector = (char **)calloc(numWords + 1, sizeof(char *));
  
  while(*pStr != '\0'){
    
    if(pStr[index] != delim){
      //tempWord += pStr[index];
      // *(tempWord++) = *pStr;
      wordLength++;
      //pStr++;
    }   
    if(pStr[index] == delim){
      if((index - 1) >= 0){
	if(pStr[index - 1] != delim){
	  // vector[position] = malloc((wordLength + 1) * sizeof(char));
	  vector[currentWord][position] = *tempWord;
	  tempWord = '\0';
	  position++;
	  wordLength = 0;
	  currentWord++;
	}
      }
    }
    //free(tempWord);
    
    printf("%c\n",*pStr);
    pStr++;
    index++;
  }
  return vector;
}

int countWords(char *str, char delim){
  int numWords, index;
  numWords = 0;
  char *pStr;
  pStr = str;
  if(*pStr == '\0'){
    numWords = 0;
  }
  else{
    if(pStr[0] != delim){
      numWords++;
    }
    while(*pStr != '\0'){
      if(*pStr == delim){
	if(*(pStr + 1) != delim){
	  if(*(pStr + 1) != '\0'){
	    numWords++;
	  }
	}
      }
      pStr++;
    }
  }
  return numWords;
}
